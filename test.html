<!DOCTYPE html>
<html lang=en>
<head>
<title>JZZ.midi.SMF Test</title>
<script src="node_modules/jzz/javascript/JZZ.js"></script>
<script src="node_modules/jzz-synth-osc/javascript/JZZ.synth.OSC.js"></script>
<script src="javascript/JZZ.midi.SMF.js"></script>
</head>

<body>

<h1>JZZ.midi.SMF Test</h1>
<p><input type=file id=file onchange='load();'></p>
<pre id=log></pre>

<script><!--
var log = document.getElementById('log');
JZZ.synth.OSC.register('Web Audio');
var out = JZZ().or('Cannot start MIDI engine!').openMidiOut().or('Cannot open MIDI Out!');

function load() {
  if (window.FileReader) {
    var reader = new FileReader();
    var f = document.getElementById('file').files[0];
    reader.onload = function(e) {
      var smf = new JZZ.MIDI.SMF(e.target.result);
      var player = smf.player();
      player.connect(out);
      player.play();
    };
    reader.readAsBinaryString(f);
  }
  else console.log('File API is not supported in this browser!');
}
--></script>

</body>
</html>
